<?php

namespace {{ rootNamespace }}\App\WordPress\AdminPages;

use Illuminate\Http\Request;
use {{ rootNamespace }}\App\Widen\Traits\InstancesTrait;
use {{ rootNamespace }}\Funcs;
use {{ coreNamespace }}\App\WordPress\AdminPages\BaseAdminPage;

class {{ className }} extends BaseAdminPage {

	use InstancesTrait;

	/**
	 * WordPress admin page properties.
	 */
	public $menu_title             = '{{ name }}';
//	public $page_title             = '{{ name }}'; // Thẻ <title>, chỉ hoạt động khi menu_slug theo chuẩn WordPress.
	public $capability             = 'manage_options';
//	public $menu_slug              = '{{ path }}';
	public $icon_url               = 'dashicons-admin-generic';
//	public $position               = 2;
//	public $parent_slug            = 'options-general.php';

	/**
	 * Parent properties.
	 */
//	public $classes                = null;
//	public $firstSubmenuTitle      = null; // WordPress sẽ tự sinh submenu cho trang chính. Thay đổi tên submenu tự sinh.
//	public $firstSubmenuClasses    = null; // WordPress sẽ tự sinh submenu cho trang chính. Thêm class cho submenu tự sinh.
//	public $isSubmenuPage          = true;
//	public $removeFirstSubmenu     = true; // WordPress sẽ tự sinh submenu cho trang chính. Xóa submenu tự sinh.
//	public $urlsMatchCurrentAccess = [];
//	public $urlsMatchHighlightMenu = [];
//	public $showScreenOptions      = true;
//	public $screenOptionsKey       = null;

	/**
	 * Custom properties.
	 */
	private $currentTab            = null;
	private $currentPage           = null;
//	private $table                 = null;

	/*
	 *
	 */

	/**
	 * Tùy biến những thuộc tính chuyên sâu\
	 * hoặc khởi tạo các thuộc tính để tái sử dụng trong toàn bộ class.
	 */
	public function customProperties() {
		/**
		 * Xác định xem menu này sẽ được highlight khi truy cập bất cứ URL nào hay không.\
		 * Nếu URL hiện tại khớp với một trong các item của mảng thì menu này sẽ được highlight.
		 */
		$this->urlsMatchHighlightMenu = [
//			'admin.php?page={{ path }}',
		];

		/**
		 * Xác định xem menu này có đang thực sự được truy cập hay không.\
		 * Nếu URL hiện tại khớp với một trong các item của mảng thì menu này xem như\
		 * đang được truy cập thực sự:
		 * - Khi đó các cài đặt liên quan đến screen options sẽ được thực thi.
		 * - Khi đó phương thức "matchedCurrentAccess" tại đây sẽ được thực thi.
		 *
		 * Cần phải làm điều này để thực thi những công việc mà chỉ menu này cần.\
		 * Chấp nhận String hoặc Regex.
		 */
		$this->urlsMatchCurrentAccess = [
//			'/admin\.php\?page={{ path }}/iu',
		];

		$this->currentTab  = $this->request->get('tab');
		$this->currentPage = $this->request->get('page');
		$this->page_title  = ($this->currentTab ? Funcs::trans('messages.' . $this->currentTab) : Funcs::trans('messages.{{ name }}')) . ' - ' . Funcs::config('app.name');

		/**
		 * Định nghĩa screen option key duy nhất dựa theo params trong URL.\
		 * Ví dụ: page=wpsp&tab=list => wpsp_page_wpsp_tab_list\
		 * Như vậy thì screen options sẽ độc lập giữa các page.
		 */
//		$this->screenOptionsKey = $this->funcs->_slugParams(['page', 'tab']);
	}

	/*
	 *
	 */

//	public function init($path = null) {
//		// You must call to parent method "init" if you want to custom it.
//		parent::init();
//
//      // Your code here...
//	}

	public function beforeInit() {}

	public function afterAddAdminPage($adminPage) {}

	public function beforeLoadAdminPage($adminPage) {}

	public function beforeInLoadAdminPage($adminPage) {}

	public function afterInLoadAdminPage($adminPage) {}

	public function afterLoadAdminPage($adminPage) {}

	public function matchedCurrentAccess() {}

	public function afterInit() {}

	/*
	 *
	 */

//	public function screenOptions($adminPage) {}

	/*
	 *
	 */

	public function index(Request $request) {
		$requestParams = $request->all();
		$menuSlug      = $this->menu_slug;
        echo Funcs::view('admin-pages.{{ path }}.main', compact('requestParams', 'menuSlug'));
	}

	public function create(Request $request) {}

	public function store(Request $request) {}

	public function show(Request $request, $id) {}

	public function edit(Request $request, $id) {}

	public function update(Request $request, $id) {}

	public function destroy(Request $request, $id) {}

	public function forceDestroy(Request $request, $id) {}

	/*
	 *
	 */

	public function styles() {
//		wp_enqueue_style(
//			Funcs::config('app.short_name') . '-bootstrap-grid',
//			Funcs::instance()->_getPublicUrl() . '/widen/plugins/bootstrap/css/bootstrap-grid.min.css',
//			null,
//			Funcs::instance()->_getVersion()
//		);
//		wp_enqueue_style(
//			Funcs::config('app.short_name') . '-bootstrap-utilities',
//			Funcs::instance()->_getPublicUrl() . '/widen/plugins/bootstrap/css/bootstrap-utilities.min.css',
//			null,
//			Funcs::instance()->_getVersion()
//		);
	}

	public function scripts() {
//		wp_enqueue_script();
	}

	public function localizeScripts() {
//		wp_localize_script();
	}

}
<?php

namespace {{ rootNamespace }}\App\WordPress\UserMetaBoxes;

use {{ rootNamespace }}\App\Widen\Traits\InstancesTrait;
use {{ rootNamespace }}\Funcs;
use {{ coreNamespace }}\App\WordPress\UserMetaBoxes\BaseUserMetaBox;

class {{ className }} extends BaseUserMetaBox {

	use InstancesTrait;

//	public $id     = '{{ id }}';
	public $title  = 'Custom user meta box: {{ id }}';
//	public $update = false; // Nếu "true" thì phương thức "update" sẽ được thực thi khi submit trang edit user.

	/*
	 *
	 */

	public function customProperties() {
//		$this->title = 'Custom user meta box: {{ id }}';
	}

	/*
	 *
	 */

	public function index($user) {
		$requestParams = $this->request->query->all();
		if (isset($_GET['user_id'])) {
			$editUserURL = add_query_arg('user_id', (int)$_GET['user_id'], admin_url('user-edit.php'));
		}
		else {
			$editUserURL = admin_url('profile.php') . '?';
		}
		echo Funcs::view('user-meta-boxes.{{ id }}.main', compact('user'))->with([
			'id'            => $this->id,
			'title'         => $this->title,
			'editUserURL'   => $editUserURL,
			'requestParams' => $requestParams,
		]);
	}

	public function update($userId) {
//		if (!current_user_can('edit_user', $userId)) {
//			return false;
//		}

//		if (isset($_POST['phone'])) {
//			update_user_meta($userId, 'phone', sanitize_text_field($_POST['phone']));
//		}
//		return true;
	}

	/*
	 *
	 */

	public function styles() {
//		wp_enqueue_style(
//			Funcs::config('app.short_name') . '-bootstrap-grid',
//			Funcs::instance()->_getPublicUrl() . '/extras/plugins/bootstrap/css/bootstrap-grid.min.css',
//			null,
//			Funcs::instance()->_getVersion()
//		);

//		wp_enqueue_style(
//			Funcs::config('app.short_name') . '-bootstrap-utilities',
//			Funcs::instance()->_getPublicUrl() . '/extras/plugins/bootstrap/css/bootstrap-utilities.min.css',
//			null,
//			Funcs::instance()->_getVersion()
//		);
	}

	public function scripts() {}

	public function localizeScripts() {}

}